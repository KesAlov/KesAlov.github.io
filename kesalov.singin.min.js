// вход на cookie
// автор kesalov corp
// сайт kesalov.github.io

       
// если у кнопки onclick="singin()" сохранить переменные username(userInput) и email(emailInput) 
   function singin()

        {

            var userInput = document.getElementById("userInput").value;

            setCookie("username",userInput,30);

            var emailInput = document.getElementById("emailInput").value;
            
            setCookie("email", emailInput,30);
         
            checkCookie();
         
            

        }
       
       // сохранение переменных в cookie
      
      function setCookie(cname,cvalue,exdays)

{

var d = new Date();

d.setTime(d.getTime()+(exdays*24*60*60*1000));

var expires = "expires="+d.toGMTString();

document.cookie = cname+"="+cvalue+"; "+expires;

}

function getCookie(cname)

{

var name = cname + "=";

var ca = document.cookie.split(';');

for(var i=0; i<ca.length; i++) 

  {

  var c = ca[i].trim();

  if (c.indexOf(name)==0) return c.substring(name.length,c.length);

  }

return "";

}




  var x = get_cookie ( "username" );
 
 //загрузка переменных обратно на сайт ( будет отображаться если в документе будет <div class="getCookie" можно ещё добавить в html <script> и добавить document.write("Текст" + username );


 

function set_cookie ( name, value, expires_year, expires_month, expires_day, path, domain, secure )

{

  var cookie_string = name + "=" + escape ( value );

 

  if ( expires_year )

  {

    var expires = new Date ( expires_year, expires_month, expires_day );

    cookie_string += "; expires=" + expires.toGMTString();

  }

 

  if ( path )

    cookie_string += "; path=" + escape ( path );

 

  if ( domain )

    cookie_string += "; domain=" + escape ( domain );

 

  if ( secure )

    cookie_string += "; secure";

 

  document.cookie = cookie_string;

 

}

 

function delete_cookie ( cookie_name )

{

  var cookie_date = new Date ( );  //Текущая дата и время

  cookie_date.setTime ( cookie_date.getTime() - 1 );

  document.cookie = cookie_name += "=; expires=" + cookie_date.toGMTString();

}

 

function get_cookie ( cookie_name )

{

  var results = document.cookie.match ( '(^|;) ?' + cookie_name + '=([^;]*)(;|$)' );

 

  if ( results )

    return ( unescape ( results[2] ) );

  else

    return null;

}
    


 

if ( ! get_cookie ( "username" ) )

{

  
    
  
    
  
 


 

  if ( username )

  {

    var current_date = new Date;

    var cookie_year = current_date.getFullYear ( ) + 1;

    var cookie_month = current_date.getMonth ( );

    var cookie_day = current_date.getDate ( );

    set_cookie ( "username", username, cookie_year, cookie_month, cookie_day );

    document.location.reload( );
      
    

  }

}

else

{

  var username = get_cookie ( "username" );
  
  var email = get_cookie ( "email" );

  document.write ( "<h1>" + "Привет, " + username + ", добро пожаловать в KAsocial" + "</h1>" );
    
  document.getElementById("email").setAttribute( email );

  
}

function checkCookie()

{

var user=getCookie("username");

var email=getCookie("email")



if (user!="")

  {



  }

else 

  {

  if (user!="" && user!=null)

    {

    setCookie("username",user,30);

    }

  }
  
} 

 

//кнопка выхода <div class="singout">
 
 function singout( name, value, expires_year, expires_month, expires_day, path, domain, secure ) {
 
 document.write ("<a href=\"javascript:delete_cookie('username'); document.location.reload( );\"> Выйти</a><br>") 
 
} 
 
 /* если вы хотите настроить функции при входе то напишите в фаиле:
 <script>
 if (user!="")

  {

  Функции при входе

  }

else 

  {

  if (user!="" && user!=null)

    {

    setCookie("username",user,30);

    }

  }
  */
 

 
     